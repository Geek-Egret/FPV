%YAML:1.0
# RGBD 相机配置文件 (camera.yaml)
# 适用框架：ROS/ROS2、OpenCV、PCL 等视觉开发场景
# 可根据实际相机标定结果修改内参、畸变系数等参数

# ===================== 通用参数 =====================
camera_name: "orbbec_gemini"        # 相机名称
camera_type: "rgbd"               # 相机类型
image_width: 640                  # 彩色图像宽度
image_height: 480                 # 彩色图像高度
depth_width: 640                  # 深度图像宽度
depth_height: 480                 # 深度图像高度
fps: 30                           # 帧率

# ===================== 彩色相机内参 =====================
# 内参矩阵 K: [fx, 0, cx; 0, fy, cy; 0, 0, 1]
color_camera:
  fx: 454.873            # x轴焦距 (像素)
  fy: 454.873            # y轴焦距 (像素)
  cx: 330.718                       # 主点x坐标 (像素)
  cy: 245.624                       # 主点y坐标 (像素)
  # 畸变系数 [k1, k2, p1, p2, k3] (径向+切向畸变)
  distortion_coefficients:      
    k1: 0.0542822
    k2: -0.0695927
    p1: -0.000260598
    p2: -0.000283424
    k3: 0.0
  # 畸变模型 (常见：plumb_bob/radtan, fisheye)
  distortion_model: "plumb_bob"

# ===================== 深度相机内参 =====================
# 深度相机通常与彩色相机共内参（硬件对齐），也可单独配置
depth_camera:
  fx: 454.873            # x轴焦距 (像素)
  fy: 454.873            # y轴焦距 (像素)
  cx: 330.718                       # 主点x坐标 (像素)
  cy: 245.624                       # 主点y坐标 (像素)
  # 畸变系数 [k1, k2, p1, p2, k3] (径向+切向畸变)
  distortion_coefficients:
    k1: 0.0
    k2: 0.0
    p1: 0.0
    p2: 0.0
    k3: 0.0
  distortion_model: "plumb_bob"

# ===================== 彩色-深度相机外参 =====================
# 深度相机相对于彩色相机的变换 (旋转+平移)
# 若硬件已对齐，旋转矩阵为单位矩阵，平移为0
extrinsic:
  rotation: [1.0, 0.0, 0.0,
             0.0, 1.0, 0.0,
             0.0, 0.0, 1.0]      # 3x3旋转矩阵 (行优先)
  translation: [0.0, 0.0, 0.0]    # 平移向量 [tx, ty, tz] (米)

# ===================== 深度参数 =====================
depth:
  scale: 0.001                    # 深度值缩放系数 (1000 -> 1米，单位：米/像素)
  min_depth: 0.25                  # 最小有效深度 (米)
  max_depth: 2.5                  # 最大有效深度 (米)
  # 深度图像编码格式 (常见：16UC1, 32FC1)
  encoding: "16UC1"

# ===================== 标定信息 =====================
calibration:
  date: "2026-02-08"              # 标定日期
  method: "Zhang's method"        # 标定方法
  note: "基于棋盘格标定，适用于Intel RealSense D435i"  # 备注

# Depth map values factor
RGBD.DepthMapFactor: 5000.0 # 1.0 for ROS_bag

# bf 参数 (ORB-SLAM3 核心必需！bf = baseline * fx，单位：像素)
# 若相机无基线（单目RGBD），设为 0.0；若有基线，根据实际值填写
Camera.bf: 18.12

# 深度参数
Camera.DepthMapFactor: 1000.0      # 深度缩放系数 (1/0.001，与之前的 scale 对应)
Camera.MinDepth: 0.25              # 最小有效深度 (米)
Camera.MaxDepth: 2.5               # 最大有效深度 (米)

#--------------------------------------------------------------------------------------------
# ORB Parameters
#--------------------------------------------------------------------------------------------

# ORB Extractor: Number of features per image
ORBextractor.nFeatures: 1000

# ORB Extractor: Scale factor between levels in the scale pyramid 	
ORBextractor.scaleFactor: 1.2

# ORB Extractor: Number of levels in the scale pyramid	
ORBextractor.nLevels: 8

# ORB Extractor: Fast threshold
# Image is divided in a grid. At each cell FAST are extracted imposing a minimum response.
# Firstly we impose iniThFAST. If no corners are detected we impose a lower value minThFAST
# You can lower these values if your images have low contrast			
ORBextractor.iniThFAST: 20
ORBextractor.minThFAST: 7

#--------------------------------------------------------------------------------------------
# Viewer Parameters
#--------------------------------------------------------------------------------------------
Viewer.KeyFrameSize: 0.05
Viewer.KeyFrameLineWidth: 1.0
Viewer.GraphLineWidth: 0.9
Viewer.PointSize: 2.0
Viewer.CameraSize: 0.08
Viewer.CameraLineWidth: 3.0
Viewer.ViewpointX: 0.0
Viewer.ViewpointY: -0.7
Viewer.ViewpointZ: -1.8
Viewer.ViewpointF: 500.0


